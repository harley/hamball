GHC_N_OPTS = ghc -i$(srcdir) --make -XMultiParamTypeClasses -XArrows -XTypeSynonymInstances -XFlexibleInstances -Wall -fno-warn-name-shadowing -fno-warn-unused-matches -fno-warn-type-defaults -outputdir obj

srcdir=src
bindir=bin

# TODO: have a complete list of files here to generate code single-page or double-page
singlepage="BoundingVolume.hs Client.hs Collision.hs GameCore.hs Laser.hs NoServer.hs"
doublepage="Colors.hs Common.hs GameInput.hs IdentityList.hs Net.hs Object.hs Particles.hs Player.hs ReadImage.hs Render.hs RunGame.hs Server.hs Sprites.hs"

all: s c ns

s:
	$(GHC_N_OPTS) $(srcdir)/Server.hs -o $(bindir)/hamsterServer

c:
	$(GHC_N_OPTS) $(srcdir)/Client.hs -o $(bindir)/hamster

ns:
	$(GHC_N_OPTS) $(srcdir)/NoServer.hs -o $(bindir)/hamsterAlone

# use this to install missing modules
yampa:
	cabal install yampa

glfw:
	cabal install GLFW

# code printing: r is landscape, 2 is 2 pages, E for highlight
html:
	enscript -E --color -whtml -toc --output=code.html src/*.hs

ps:
	enscript -G2rE --color --output=code.ps src/*.hs

# stuff is generated by "ghc --make", so we just delete it
clean:
	rm -r obj/ dist/ bin/

